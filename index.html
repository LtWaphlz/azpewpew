<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>IPew Attack Map — AZ DES</title>
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">
<style>
  body { margin:0; padding:0; background:#000; color:#fff; }

  #titlediv{
    font-family: monospace; text-align:center; font-size:48px;
    position:fixed; width:100%; height:50px; color:#fff; background:#000;
    padding:5px; top:0; z-index:10; overflow-y:auto;
  }

  /* Toolbar for zoom + options */
  #toolbar{
    position:fixed; left:0; right:0; top:55px; z-index:11;
    display:flex; gap:8px; flex-wrap:wrap; align-items:center; justify-content:center;
    padding:8px 10px; background:rgba(0,0,0,.85); border-bottom:1px solid #222;
    font-family: monospace; font-size:13px;
  }
  #toolbar button{
    cursor:pointer; background:#111; color:#eee; border:1px solid #333;
    padding:6px 10px; border-radius:6px;
  }
  #toolbar button:hover{ background:#151515; }

  #container1{
    position:relative; width:100vw; height:100vh; max-width:100%; max-height:100%;
  }

  #attackdiv{
    font-family: monospace; font-size:10px;
    position:fixed; width:50%; height:110px; color:#fff; background:#000;
    padding:5px; bottom:0; z-index:12; overflow-y:auto; border-top:1px solid #222;
  }
  #legend { padding:4px 6px; border-top:1px solid #333; margin-top:4px; color:#aaa; font-size:10px; }
  #legend .swatch { display:inline-block; width:12px; height:5px; border-radius:1px; margin-right:4px; }

  #about{ display:none; }
  #aboutdiv{ text-align:right; width:100px; height:100px; top:0; right:0; position:fixed; padding:10px; color:#fff; z-index:12; }
  #ccdiv{ text-align:right; width:100px; height:20px; bottom:0; right:0; position:fixed; padding:5px; color:#fff; z-index:12; }

  /* SimpleModal */
  #simplemodal-overlay { background-color:#000; }
  #simplemodal-container {height:460px; width:600px; color:#bbb; background:#333; border:4px solid #444; padding:12px;}
  #simplemodal-container .simplemodal-data {padding:8px;}
  #simplemodal-container code {background:#141414; border-left:3px solid #65B43D; color:#bbb; display:block; font-size:12px; margin-bottom:12px; padding:4px 6px 6px;}
  #simplemodal-container a {color:#ddd;}
  #simplemodal-container a.modalCloseImg {background:url(x.png) no-repeat; width:25px; height:29px; display:inline; z-index:3200; position:absolute; top:-15px; right:-18px; cursor:pointer;}
  #simplemodal-container h3 {color:#84b8d9;}
</style>

<!-- libs -->
<script src="https://d3js.org/d3.v3.min.js"></script>
<script src="https://d3js.org/d3.geo.projection.v0.min.js"></script>
<script src="https://d3js.org/topojson.v1.min.js"></script>
<script src="https://datamaps.github.io/scripts/datamaps.world.min.js?v=1"></script>
<script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
<script src="jquery.simplemodal-1.4.4.js"></script>
<script>
  function about(){ $("#about").modal(); }

  // URL helpers used by the buttons
  function getParam(name){ try{ return new URL(window.location.href).searchParams.get(name); }catch(e){ return null; } }
  function setParams(obj){
    var url = new URL(window.location.href);
    Object.keys(obj).forEach(function(k){
      var v = obj[k];
      if(v===null||v===undefined||v==='') url.searchParams.delete(k);
      else url.searchParams.set(k,v);
    });
    if(!url.searchParams.get('org_name')) url.searchParams.set('org_name','AZ%20DES');
    window.location.href = url.toString();
  }
</script>
</head>

<body>
  <!-- sounds -->
  <audio id="starwars" src="Blaster-Solo.wav" preload="auto"></audio>
  <audio id="tng" src="tng_torpedo_clean.mp3" preload="auto"></audio>
  <audio id="b5" src="B5-interceptor1.wav" preload="auto"></audio>
  <audio id="wargames" src="WarGames-KeyPress.wav" preload="auto"></audio>
  <audio id="pew" src="pew.mp3" preload="auto"></audio>
  <audio id="galaga" src="shot_sound.mp3" preload="auto"></audio>
  <audio id="asteroids" src="asteroids.mp3" preload="auto"></audio>
  <audio id="china" src="china.mp3" preload="auto"></audio>
  <audio id="timallen" src="timallen.wav" preload="auto"></audio>

  <div id="titlediv">IPew Attack Map</div>

  <!-- Toolbar: zoom + option toggles -->
  <div id="toolbar">
    <strong>Zoom:</strong>
    <button id="zoom-phx">Phoenix</button>
    <button id="zoom-tus">Tucson</button>
    <button id="zoom-mesa">Mesa</button>
    <button id="zoom-reset">Reset</button>
    <span style="margin-left:12px;"></span>
    <strong>Options:</strong>
    <button id="btn-busy">Busy Day</button>
    <button id="btn-sound">Toggle Sounds</button>
    <button id="btn-palette">Green/Red</button>
  </div>

  <center><div id="container1"></div></center>

  <div id="attackdiv">
    <div id="log"></div>
    <div id="legend">
      <span class="swatch" style="background:#0f0;"></span>Green = lower‑severity / benign traffic&nbsp;&nbsp;
      <span class="swatch" style="background:#f00;"></span>Red = higher‑severity / malicious traffic
    </div>
  </div>

  <div id="aboutdiv"><i class="fa fa-question-circle fa-2x" onClick="about();"></i></div>
  <div id="ccdiv">
    <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">
      <img alt="Creative Commons License" style="border-width:0"
